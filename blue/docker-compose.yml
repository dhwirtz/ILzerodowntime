networks:
  ipvlan20:
    external: true
    name: ipvlan20 
  ipvlan40:
    external: true
    name: ipvlan40 
services:
  web:
    build: ./php
    volumes:
      - ./app:/var/www/html
    depends_on:
      - redis
    environment:
      - DB_HOST=db 
      - DB_NAME=magento
      - DB_USER=magento
      - DB_PASSWORD=magento
      - REDIS_HOST=redis
    networks:
      ipvlan20:
        ipv4_address: 192.168.70.130
      ipvlan40: 
        ipv4_address: 192.168.72.3 

  redis:
    image: redis:alpine
    volumes:
      - ../shared/redis:/data
    networks:
      ipvlan20:
        ipv4_address: 192.168.70.131
      ipvlan40: 
        ipv4_address: 192.168.72.2

